# SenWork 技术设计

## 上下文

SenWork 是一个全栈个人作品集网站，采用前后端分离架构。后端使用 Go + Gin 提供 RESTful API，前端使用 Vue 3 + TypeScript 构建单页面应用。当前代码已完成基础功能实现，需要建立统一的技术规范指导后续开发。

## 目标

1. **规范 API 接口**: 确保前后端数据交互的一致性和可预测性
2. **统一类型系统**: Go 数据模型与 TypeScript 类型定义保持一一对应
3. **建立组件规范**: 指导前端组件的开发、测试和维护
4. **明确响应式策略**: 确保网站在各种设备上的显示效果

## 技术决策

### 1. API 设计决策

**RESTful 风格**: 采用标准的 HTTP 方法和资源路径

| 决策 | 选择 | 理由 |
|------|------|------|
| API 风格 | RESTful | 简单直观，符合业界标准 |
| 响应包装 | 统一包装对象 | 便于前端统一处理成功/失败状态 |
| 错误处理 | 错误码 + 消息 | 便于问题定位和用户提示 |
| 版本控制 | URL 前缀 /api/v1 | 简单易用，未来可扩展 |

**替代方案考量**: GraphQL 提供了更灵活的数据查询能力，但对于当前项目规模过于复杂，增加实现和维护成本。

### 2. 前端架构决策

**单页面应用 (SPA)**: 使用 Vue Router 实现客户端路由

| 决策 | 选择 | 理由 |
|------|------|------|
| 框架 | Vue 3 + Composition API | 更好的类型推断和逻辑复用 |
| 构建工具 | Vite | 开发体验好，构建速度快 |
| 状态管理 | 组件状态（暂不需要 Vuex） | 数据简单，无需全局状态 |
| 路由方案 | 客户端路由 | SPA 体验流畅 |

**替代方案考量**: Nuxt.js 提供了更好的 SEO 支持和服务器端渲染，但增加了配置复杂度。当前项目对 SEO 要求不高，Vue SPA 足够满足需求。

### 3. 数据同步决策

**静态数据 + 动态加载**: 数据存储在后端 Go 代码中，前端通过 API 动态获取

| 决策 | 选择 | 理由 |
|------|------|------|
| 数据存储 | Go 静态数据 | 简单无依赖，部署方便 |
| 实时性 | 每次加载 | 数据不常变化，简化架构 |
| 缓存 | 浏览器缓存 | 利用 HTTP 缓存机制 |

**替代方案考量**: 数据库存储（MySQL/PostgreSQL）提供了更好的数据持久化和管理能力，但增加了部署复杂度。对于个人作品集，静态数据足够使用。

### 4. 样式方案决策

**CSS Modules + 变量**: 使用 Vue 单文件组件的 scoped CSS

| 决策 | 选择 | 理由 |
|------|------|------|
| 预处理器 | 原生 CSS | 简单直接，无需构建配置 |
| 命名规范 | BEM 简化版 | 避免命名冲突 |
| 响应式 | 媒体查询 | CSS 原生支持 |

**替代方案考量**: Tailwind CSS 提供了更快的样式开发速度，但增加了学习成本和项目配置。当前代码库使用原生 CSS，保持一致性。

## 风险与权衡

### 已知风险

1. **静态数据限制**: 数据修改需要重新部署后端服务
   - 缓解: 数据更新频率低，每次更新需重新发布
   - 替代: 未来可迁移至数据库

2. **前端路由 SEO**: 搜索引擎对 SPA 爬取不友好
   - 缓解: 基础 meta 标签已配置
   - 替代: 未来可迁移至 Nuxt.js 实现 SSR

3. **类型不一致**: Go 和 TypeScript 类型需要手动同步
   - 缓解: 规范文档建立了映射关系
   - 替代: 未来可使用代码生成工具自动同步

### 权衡取舍

- **开发速度 vs 可维护性**: 优先保证开发速度，后续建立规范
- **功能完整 vs 代码简洁**: 保持代码简洁，必要时才添加功能
- **本地开发 vs 生产部署**: 开发体验优先，同时确保部署简单

## 迁移计划

### 第一阶段：规范同步

1. 更新 Go handler 类型注释，与 API 规范对齐
2. 更新前端类型定义，与 Go 模型保持一致
3. 添加 API 文档生成配置（swag）

### 第二阶段：代码优化

1. 提取公共样式变量，建立主题系统
2. 统一组件命名和目录结构
3. 添加组件单元测试

### 第三阶段：质量保障

1. 配置 TypeScript 严格模式
2. 添加 CI 流程检查代码质量
3. 建立文档更新机制

## 开放问题

1. **国际化需求**: 是否需要支持多语言？
2. **主题切换**: 是否需要亮色/暗色主题？
3. **用户系统**: 是否需要添加访客评论功能？
4. **内容管理**: 是否需要 CMS 后台管理数据？
